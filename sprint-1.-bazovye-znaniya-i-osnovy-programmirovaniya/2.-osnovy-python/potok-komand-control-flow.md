# Поток команд \(Control Flow\)

В программах, рассмотренных на настоящий момент, каждая из инструкций выполняется только однажды, причем по порядку. Большинство программ куда сложнее, поскольку последовательность инструкций и количество их выполнений могут изменяться.

Для описания изменения порядка инструкций в программе используется термин контроль потока \(control flow\). Почти во всех языках программирования есть инструкции, позволяющие изменять последовательность выполнения на основании логики и значения переменных.

## Условные операторы

Ход выполнения программы может быть линейным, то есть таким, когда выражения выполняются друг за другом, начиная с первого и заканчивая последним. Ни одна строка кода программы не пропускается.

Однако чаще в программах бывает не так. При выполнении кода, в зависимости от тех или иных условий, некоторые его участки могут быть опущены, в то время как другие - выполнены. Иными словами, в программе может присутствовать ветвление, которое реализуется условным оператором - особой конструкцией языка программирования.

Проведем аналогию с реальность. Человек живет по расписанию. Можно сказать, расписание - это алгоритм для человека, его программный код, подлежащий исполнению. В расписании на 18.00 стоит поход в бассейн. Однако, если воду из бассейна слили, разумно было бы отменить занятие по плаванию, то есть изменить ход выполнения программы-расписания. Одним из условий посещения бассейна должно быть его функционирование, иначе должны выполняться другие действия.

Подобная нелинейность действий может быть реализована в компьютерной программе. Например, часть кода будет выполняться лишь при определенном значении конкретной переменной. В языках программирования используется приблизительно такая конструкция условного оператора:

```text
if логическое_выражание {
    инструкция 1
    инструкция 2
    ...
}
```

Перевести на человеческий язык можно так: если логическое выражение возвращает истину, то выполняются выражения внутри фигурных скобок; если логическое выражение возвращает ложь, то код внутри фигурных скобок не выполняется.

Конструкция `if логическое_выражение` называется заголовком условного оператора. Выражения внутри фигурных скобок - телом условного оператора. Тело может содержать как множество выражений, так и всего одно или даже может быть пустым.

Пример использования условного оператора в Python

```python
if n < 100:
    b = n + a
```

В Python вместо фигурных скобок используется двоеточие. Обособление вложенного кода, то есть тела оператора, достигается за счет отступов. В программировании принято делать отступ равный четырем пробелам. Однако также можно использовать Tab на клавиатуре.

{% hint style="info" %}
Python считается языком с ясным синтаксисом и легко читаемым кодом. Это достигается сведением к минимуму таких вспомогательных элементов как скобок и точек с запятой. Для разделения инструкций используется переход на новую строку, а для обозначения вложенных выражений - отступы от начала строки.

В других языках данный стиль программирования также используется, но лишь для удобочитаемости кода человеком. В Python же он возведен в ранг синтаксического правила.
{% endhint %}

В примере выше логическим выражением является n &lt; 100. Если оно возвращает истину, то выполнится строчка код b = n + a. Если логическое выражение ложно, то выражение b = n + a не выполнится.

Приведем полную версию программы

```python
b = 0
a = 50
n = 98

if n < 100:
    b = n + a
print(b)
```

Последняя строчка кода print\(b\) уже не относится к условному оператору, что обозначено отсутствием перед ней отступа. Она не является вложенной в условный оператор, значит, не принадлежит ему.

Поскольку переменная n равна 98, а это меньше 100, то b станет равной 148. Это значение будет выведено на экран. Если переменная n изначально была бы связана, например, со значением 101, то на экран был бы выведен 0. При n, равной 101, логическое выражение в заголовке условного оператора вернуло бы ложь. Значит, тело не было бы выполнено, и переменная b не изменилась бы.

Структуру программы можно изобразить следующим образом:

![](../../.gitbook/assets/image%20%2814%29.png)

Основная ветка программы выполняется всегда, а вложенный код лишь тогда, когда в темно-зеленой строчке, обозначающей заголовок условного оператора, случается истина.

Для небольших программ иногда чертят так называемые блок-схемы \(flowchart\), отражающие алгоритм выполнения. В языке блок-схем определенные конструкции обозначаются своими фигурами. Так блок действий обозначается прямоугольником, а логическое выражение - ромбом. Для кода выше блок-схема может выглядеть так

![](../../.gitbook/assets/image%20%2838%29.png)

#### Блок инструкций

Блок инструкций - часть кода, которая сгруппирована и воспринимается как единое целое. Блоки могут состоять из одного или нескольких инструкций, а также могут быть пустыми. В языках C, C++ и некоторых других языках, блоки выделяются фигурными скобками `{ }`. В языке Pascal и некоторых других языках блоки выделяются словами "begin" и "end".

Вложенные инструкции объединяются в блоки по величине отступов. Отступ может быть любым, главное, чтобы в пределах одного вложенного блока отступ был одинаков. Для отступа принято использовать 4 пробела.

Вложенные инструкции в Python записываются в соответствии с одним и тем же шаблоном, когда основная инструкция завершается двоеточием, вслед за которым располагается вложенный блок кода, обычно с отступом под строкой основной инструкции.

```python
Основная инструкция:
    Вложенный блок инструкций
```

Рассмотрим пример кода:

```python
a = 10
b = 5

if a > b:
    print("A больше B")
    print(a - b)

print ("Конец")
```

Python понимает, какие строки относятся к if на основе отступов. Выполнение блока `if a > b` заканчивается, когда встречается строка с тем же отступом, что и сама строка `if a > b`.

### Блок else

Условный оператор может включать не одну ветку, а две, реализуя тем самым полноценное ветвление.

![](../../.gitbook/assets/image%20%2840%29.png)

В случае возврата логическим выражением False поток выполнения программы не возвращается сразу в основную ветку. На случай False существует другой вложенный код, отличный от случая True. Другими словами, встретившись с расширенной версией условного оператора, поток выполнения программы не вернется в основную ветку, не выполнив один из вложенных кодов.

В языках программирования разделение на две ветви достигается с помощью добавления блока else, получается так называемое if-else \(если-иначе\). Синтаксис выглядит примерно так:

```python

```

Если условие при инструкции if оказывается ложным, то выполняется блок кода при инструкции else. Ситуация, при которой бы выполнились обе ветви, невозможна. Либо код, принадлежащий if, либо код, принадлежащий else. Никак иначе. В заголовке else никогда не бывает логического выражения.

Пример кода с веткой else на языке Python

```python

```

### Нестандартные логические выражения

Следует иметь ввиду, что логическое выражение при if может выглядеть "нестандартно", то есть не так просто, как a &gt; b и тому подобное. Там может стоять просто одна переменная, число, слово True или False, а также сложное логическое выражение, когда два простых соединяются через логически И или ИЛИ

```python

```

Если вместо знака вопроса будет стоять 0, то с логической точки зрения это False, значит выражение в if не будет выполнено. Если a будет связано с любым другим числом, то оно будет расцениваться как True, и тело условного оператора выполнится. Другой пример:

```python

```

Здесь a уже связана с булевым значением. В данном случае это True. Отметим, что в выражении a = 5 &gt; 0 присваивание выполняется после оператора сравнения, так что подвыражение 5 &gt; 0 выполнится первым, после чего результат будет присвоен переменной a. На будущее, если вы сомневаетесь в последовательности выполнения операторов, используйте скобки, например так: a = \(5 &gt; 0\)

Третий пример:

```python

```

Тут, чтобы вложенный код выполнился, `a` должно быть больше 0 и одновременно меньше `b`. Также в Python, в отличие от других языков программирования, позволительна такая сокращенная запись сложного логического выражения

```python

```

### Множественное ветвление: if-elif-else

Ранее мы рассматривали работу условного оператора if. С помощью его расширенной версии if-else можно реализовать две отдельные ветви выполнения. Однако алгоритм программы может предполагать выбор больше, чем из двух путей, например, из трех, четырех или даже пяти. В данном случае следует говорить о необходимости множественного ветвления.



